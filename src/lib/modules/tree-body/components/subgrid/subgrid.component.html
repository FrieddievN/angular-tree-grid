<ng-container *ngIf="expand_tracker[row_data.parent_pathx]">
  <ng-container *ngIf="!row_data.leaf">
    <td *ngFor="let column of configs.columns; index as i" 
      [ngClass]="{'column-hide': column.hidden, 'expand-column': i == 0}">
      <db-tree-cell
        [configs]="configs"
        [column]="column"
        [index]="i"
        [row_data]="row_data"
        [expand_tracker]="expand_tracker"
        [edit_on]="edit_tracker[row_data[configs.id_field]]"
        [cellclick]="cellclick"
        (rowexpand)="onRowExpand($event)"
        (rowcollapse)="onRowCollapse($event)"
      >
      </db-tree-cell>
    </td>
  </ng-container>
  <ng-container *ngIf="row_data.leaf">
    <td [attr.colspan]="configs.columns.length" class="subgrid-column">
        <table class="subgrid-table">
            <thead>
              <tr>
                <th *ngFor="let column of configs.subgrid_config.columns"
                  (click)="sortColumn(row_data, column)" width="{{column.width ? column.width : 'auto'}}"
                  [ngClass]="{'sorted': column.sorted,'sortable': column.sortable, 'column-hide': column.hidden}">
                  {{column.header}}
                  <span *ngIf="column.sortable" [ngClass]="column.sorted && column.sort_type == 0?'arrow-down active':'arrow-down'"></span>
                  <span *ngIf="column.sortable" [ngClass]="column.sorted && column.sort_type == 1?'arrow-up active':'arrow-up'"></span>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let child_data of row_data.children">
                <td *ngFor="let column of configs.subgrid_config.columns; index as i">
                  <db-tree-cell
                    [configs]="configs"
                    [column]="column"
                    [index]="i"
                    [row_data]="child_data"
                    [expand_tracker]="expand_tracker"
                    [cellclick]="cellclick"
                  ></db-tree-cell>
                </td>
              </tr>
              <tr *ngIf="configs.subgrid_config.show_summary_row">
                <td *ngFor="let column of configs.subgrid_config.columns">
                  <div [innerHTML]="column.summary_renderer && column.summary_renderer(row_data.children)"></div>
                </td>
              </tr>
            </tbody>
            
          </table>
    </td>    
  </ng-container>  
</ng-container>